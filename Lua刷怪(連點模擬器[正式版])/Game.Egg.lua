map_weapon = {
    map1 = {
        {name = 'common', type = 16, value = 2, chance = 50},
        {name = 'rare', type = 16, value = 4, chance = 40},
        {name = 'epic', type = 16, value = 8, chance = 8},
        {name = 'legend', type = 11, value = 16, chance = 1.5},
        {name = 'mythic', type = 26, value = 32, chance = 0.5},
    },
    map2 = {
        {name = 'common',type = 1, value = 16, chance = 57.5},
        {name = 'rare', type = 1, value = 32, chance = 37.5},
        {name = 'epic', type = 1, value = 64, chance = 4},
        {name = 'legend', type = 17, value = 128, chance = 0.9},
        {name = 'mythic', type = 10, value = 256, chance = 0.1},
    },
    map3 = {
        {name = 'common',type = 67, value = 128,chance = 62.5},
        {name = 'rare', type = 67, value = 256, chance = 34.5},
        {name = 'epic', type = 67, value = 512, chance = 2.5},
        {name = 'legend', type = 70, value = 1024, chance = 0.45},
        {name = 'mythic', type = 78, value = 2048, chance = 0.05},
    },
    map4 = {
        {name = 'common',type = 26, value = 1024, chance = 65},
        {name = 'rare', type = 10, value = 2048, chance = 32.5},
        {name = 'epic', type = 78, value = 4096, chance = 2},
        {name = 'legend', type = 12, value = 8192, chance = 0.475},
        {name = 'mythic', type = 19, value = 16384, chance = 0.024},
        {name = 'secret', type = 75, value = 32768, chance = 0.001},
    },
    map5 = {
        {name = 'common',type = 10, value = 8192, chance = 65.5},
        {name = 'rare', type = 7, value = 16384, chance = 32.25},
        {name = 'epic', type = 23, value = 32768, chance = 1.75},
        {name = 'legend', type = 67, value = 65536, chance = 0.45},
        {name = 'mythic', type = 90, value = 131072, chance = 0.0491},
        {name = 'secret', type = 203, value = 262144, chance = 0.0009},
    },
    map6 = {
        {name = 'common',type = 12, value = 65536, chance = 66.5},
        {name = 'rare', type = 19, value = 131072, chance = 31.5},
        {name = 'epic', type = 26, value = 262144, chance = 1.765},
        {name = 'legend', type = 3, value = 524288, chance = 0.325},
        {name = 'mythic', type = 18, value = 1048576, chance = 0.0242},
        {name = 'secret', type = 258, value = 2097152, chance = 0.0008},
    },
    map7 = {
        {name = 'common',type = 7, value = 524288, chance = 67},
        {name = 'rare', type = 11, value = 1048576, chance = 31.25},
        {name = 'epic', type = 90, value = 2097152, chance = 1.6},
        {name = 'legend', type = 30, value = 4194304, chance = 0.125},
        {name = 'mythic', type = 15, value = 8388608, chance = 0.0243},
        {name = 'secret', type = 277, value = 16777216, chance = 0.0007},
    },
    map8 = {
        {name = 'common',type = 17, value = 4194304, chance = 67.5},
        {name = 'rare', type = 66, value = 8388688, chance = 30.75},
        {name = 'epic', type = 12, value = 16777216, chance = 1.55},
        {name = 'legend', type = 19, value = 33554432, chance = 0.175},
        {name = 'mythic', type = 284, value = 67108864, chance = 0.0244},
        {name = 'secret', type = 381, value = 134217728, chance = 0.0006},
    },
    map9 = {
        {name = 'common',type = 3, value = 33554432, chance = 69},
        {name = 'rare', type = 103, value = 67108864, chance = 29.4},
        {name = 'epic', type = 95, value = 134217728, chance = 1.42},
        {name = 'legend', type = 58, value = 268435456, chance = 0.1575},
        {name = 'mythic', type = 75, value = 536870912, chance = 0.0225},
        {name = 'secret', type = 170, value = 1073741824, chance = 0.0005},
    },
    map10 = {
        {name = 'common',type = 18, value = 268435456, chance = 70},
        {name = 'rare', type = 192, value = 536870912, chance = 28.5},
        {name = 'epic', type = 13, value = 1073741824, chance = 1.33},
        {name = 'legend', type = 16, value = 2147483648, chance = 0.149},
        {name = 'mythic', type = 204, value = 4294967296, chance = 0.0206},
        {name = 'secret', type = 398, value = 8589934592, chance = 0.0004},
    },
    map11 = {
        {name = 'common',type = 103, value = 2147483648, chance = 71},
        {name = 'rare', type = 12, value = 4294967296, chance = 27.6},
        {name = 'epic', type = 10, value = 8589934592, chance = 1.25},
        {name = 'legend', type = 74, value = 17179869184, chance = 0.13},
        {name = 'mythic', type = 105, value = 34359738368, chance = 0.0197},
        {name = 'secret', type = 144, value = 68719476736, chance = 0.0003},
    },
    map12 = {
        {name = 'common',type = 66, value = 17179869184, chance = 72},
        {name = 'rare', type = 15, value = 34359738368, chance = 26.7},
        {name = 'epic', type = 21, value = 68719476736, chance = 1.16},
        {name = 'legend', type = 5, value = 137438953472, chance = 0.122},
        {name = 'mythic', type = 39, value = 274877906944, chance = 0.0178},
        {name = 'secret', type = 373, value = 549755813888, chance = 0.0002},
    },
    map13 = {
        {name = 'common',type = 70, value = 137438953472, chance = 73},
        {name = 'rare', type = 161, value = 274877906944, chance = 25.8},
        {name = 'epic', type = 41, value = 549755813888, chance = 1.07},
        {name = 'legend', type = 105, value = 1099511627776, chance = 0.114},
        {name = 'mythic', type = 24, value = 2199023255552, chance = 0.0159},
        {name = 'secret', type = 207, value = 4398046511104, chance = 0.0001},
    },
    map14 = {
        {name = 'common',type = 95, value = 1099511627776, chance = 74},
        {name = 'rare', type = 17, value = 2199023255552, chance = 24.9},
        {name = 'epic', type = 102, value = 4398046511104, chance = 0.98},
        {name = 'legend', type = 108, value = 8796093022208, chance = 0.105},
        {name = 'mythic', type = 107, value = 17592186044416, chance = 0.01491},
        {name = 'secret', type = 400, value = 35184372088832, chance = 0.00009},
    },
    map15 = {
        {name = 'common',type = 30, value = 8796093022208, chance = 75},
        {name = 'rare', type = 3, value = 17592186044416, chance = 24},
        {name = 'epic', type = 70, value = 35184372088832, chance = 0.89},
        {name = 'legend', type = 27, value = 70368744177664, chance = 0.096},
        {name = 'mythic', type = 8, value = 140737488355328, chance = 0.01392},
        {name = 'secret', type = 385, value = 281474976710656, chance = 0.00008},
    },
    map16 = {
        {name = 'common',type = 11, value = 70368744177664, chance = 76},
        {name = 'rare', type = 24, value = 140737488355328, chance = 23.1},
        {name = 'epic', type = 160, value = 281474976710656, chance = 0.8},
        {name = 'legend', type = 22, value = 562949953421312, chance = 0.087},
        {name = 'mythic', type = 28, value = 1125899906842624, chance = 0.01293},
        {name = 'secret', type = 183, value = 2251799813685248, chance = 0.00007},
    },
    map1001 = {
        {name = 'common',type = 13, value = 10000000000, chance = 82.2},
        {name = 'rare', type = 105, value = 100000000000, chance = 15.78},
        {name = 'epic', type = 39, value = 1000000000000, chance = 1.908},
        {name = 'legend', type = 222, value = 10000000000000, chance = 0.1018},
        {name = 'mythic', type = 20, value = 100000000000000, chance = 0.01019},
        {name = 'secret', type = 449, value = 1000000000000000, chance = 0.00001},
    },
}

-- 武器顏色
local WeaponColor = {
    G.WC.WHITE,
    G.WC.BLUE,
    G.WC.RED,
    G.WC.YELLOW,
    G.WC.ORANGE,
    G.WC.GREEN
}

-- 裝置控制方塊函式
function G_ST(str,bool)
    return Game.SetTrigger(str,bool)
end

-- 生成武器函式
function G_DBWP(player,pwp,map,wt,pos,wn)
    local wp
    local pu = player.user
    if pwp == 1 then
        wp = Game.Weapon.CreateAndDrop(wt,pos)
    elseif pwp == 0 then
        wp = Game.Weapon.CreateAndDrop(WeaponList[wt],pos)
    end

    if pu.buyUB == 1 then
        local RN = G_RF(1,100)
        if RN > 99.00 and RN < 100.01 then
            wp.infiniteclip = true
            AdviceWPUB.value = player.name
        end
    end

    local wu = wp.user

    if map == 1 then
        if wn == 2 then
            wp.color = WeaponColor[1]
        elseif wn == 4 then
            wp.color = WeaponColor[2]
        elseif wn == 8 then
            wp.color = WeaponColor[3]
        elseif wn == 16 then
            wp.color = WeaponColor[4]
        elseif wn == 32 then
            wp.color = WeaponColor[5]
        elseif wn == 41 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 2 then
        if wn == 16 then
            wp.color = WeaponColor[1]
        elseif wn == 32 then
            wp.color = WeaponColor[2]
        elseif wn == 64 then
            wp.color = WeaponColor[3]
        elseif wn == 128 then
            wp.color = WeaponColor[4]
        elseif wn == 256 then
            wp.color = WeaponColor[5]
        end
        wu.dtap = wn
    elseif map == 3 then
        if wn == 128 then
            wp.color = WeaponColor[1]
        elseif wn == 256 then
            wp.color = WeaponColor[2]
        elseif wn == 512 then
            wp.color = WeaponColor[3]
        elseif wn == 1024 then
            wp.color = WeaponColor[4]
        elseif wn == 2048 then
            wp.color = WeaponColor[5]
        end
        wu.dtap = wn
    elseif map == 4 then
        if wn == 1024 then
            wp.color = WeaponColor[1]
        elseif wn == 2048 then
            wp.color = WeaponColor[2]
        elseif wn == 4096 then
            wp.color = WeaponColor[3]
        elseif wn == 8192 then
            wp.color = WeaponColor[4]
        elseif wn == 16384 then
            wp.color = WeaponColor[5]
        elseif wn == 32768 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 5 then
        if wn == 8192 then
            wp.color = WeaponColor[1]
        elseif wn == 16384 then
            wp.color = WeaponColor[2]
        elseif wn == 32768 then
            wp.color = WeaponColor[3]
        elseif wn == 65536 then
            wp.color = WeaponColor[4]
        elseif wn == 131072 then
            wp.color = WeaponColor[5]
        elseif wn == 262144 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 6 then
        if wn == 65536 then
            wp.color = WeaponColor[1]
        elseif wn == 131072 then
            wp.color = WeaponColor[2]
        elseif wn == 262144 then
            wp.color = WeaponColor[3]
        elseif wn == 524288 then
            wp.color = WeaponColor[4]
        elseif wn == 1048576 then
            wp.color = WeaponColor[5]
        elseif wn == 2097152 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 7 then
        if wn == 524288 then
            wp.color = WeaponColor[1]
        elseif wn == 1048576 then
            wp.color = WeaponColor[2]
        elseif wn == 2097152 then
            wp.color = WeaponColor[3]
        elseif wn == 4194304 then
            wp.color = WeaponColor[4]
        elseif wn == 8388608 then
            wp.color = WeaponColor[5]
        elseif wn == 16777216 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 8 then
        if wn == 4194304 then
            wp.color = WeaponColor[1]
        elseif wn == 8388688 then
            wp.color = WeaponColor[2]
        elseif wn == 16777216 then
            wp.color = WeaponColor[3]
        elseif wn == 33554432 then
            wp.color = WeaponColor[4]
        elseif wn == 67108864 then
            wp.color = WeaponColor[5]
        elseif wn == 134217728 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 9 then
        if wn == 33554432 then
            wp.color = WeaponColor[1]
        elseif wn == 67108864 then
            wp.color = WeaponColor[2]
        elseif wn == 134217728 then
            wp.color = WeaponColor[3]
        elseif wn == 268435456 then
            wp.color = WeaponColor[4]
        elseif wn == 536870912 then
            wp.color = WeaponColor[5]
        elseif wn == 1073741824 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 10 then
        if wn == 268435456 then
            wp.color = WeaponColor[1]
        elseif wn == 536870912 then
            wp.color = WeaponColor[2]
        elseif wn == 1073741824 then
            wp.color = WeaponColor[3]
        elseif wn == 2147483648 then
            wp.color = WeaponColor[4]
        elseif wn == 4294967296 then
            wp.color = WeaponColor[5]
        elseif wn == 8589934592 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 11 then
        if wn == 2147483648 then
            wp.color = WeaponColor[1]
        elseif wn == 4294967296 then
            wp.color = WeaponColor[2]
        elseif wn == 8589934592 then
            wp.color = WeaponColor[3]
        elseif wn == 17179869184 then
            wp.color = WeaponColor[4]
        elseif wn == 34359738368 then
            wp.color = WeaponColor[5]
        elseif wn == 68719476736 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 12 then
        if wn == 17179869184 then
            wp.color = WeaponColor[1]
        elseif wn == 34359738368 then
            wp.color = WeaponColor[2]
        elseif wn == 68719476736 then
            wp.color = WeaponColor[3]
        elseif wn == 137438953472 then
            wp.color = WeaponColor[4]
        elseif wn == 274877906944 then
            wp.color = WeaponColor[5]
        elseif wn == 549755813888 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 13 then
        if wn == 137438953472 then
            wp.color = WeaponColor[1]
        elseif wn == 274877906944 then
            wp.color = WeaponColor[2]
        elseif wn == 549755813888 then
            wp.color = WeaponColor[3]
        elseif wn == 1099511627776 then
            wp.color = WeaponColor[4]
        elseif wn == 2199023255552 then
            wp.color = WeaponColor[5]
        elseif wn == 4398046511104 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 14 then
        if wn == 1099511627776 then
            wp.color = WeaponColor[1]
        elseif wn == 2199023255552 then
            wp.color = WeaponColor[2]
        elseif wn == 4398046511104 then
            wp.color = WeaponColor[3]
        elseif wn == 8796093022208 then
            wp.color = WeaponColor[4]
        elseif wn == 17592186044416 then
            wp.color = WeaponColor[5]
        elseif wn == 35184372088832 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 15 then
        if wn == map_weapon.map15[1].value then
            wp.color = WeaponColor[1]
        elseif wn == map_weapon.map15[2].value  then
            wp.color = WeaponColor[2]
        elseif wn == map_weapon.map15[3].value  then
            wp.color = WeaponColor[3]
        elseif wn == map_weapon.map15[4].value  then
            wp.color = WeaponColor[4]
        elseif wn == map_weapon.map15[5].value  then
            wp.color = WeaponColor[5]
        elseif wn == map_weapon.map15[6].value  then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 16 then
        if wn == map_weapon.map16[1].value then
            wp.color = WeaponColor[1]
        elseif wn == map_weapon.map16[2].value  then
            wp.color = WeaponColor[2]
        elseif wn == map_weapon.map16[3].value  then
            wp.color = WeaponColor[3]
        elseif wn == map_weapon.map16[4].value  then
            wp.color = WeaponColor[4]
        elseif wn == map_weapon.map16[5].value  then
            wp.color = WeaponColor[5]
        elseif wn == map_weapon.map16[6].value  then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    elseif map == 1001 then
        if wn == 10000000000 then
            wp.color = WeaponColor[1]
        elseif wn == 100000000000 then
            wp.color = WeaponColor[2]
        elseif wn == 1000000000000 then
            wp.color = WeaponColor[3]
        elseif wn == 10000000000000 then
            wp.color = WeaponColor[4]
        elseif wn == 100000000000000 then
            wp.color = WeaponColor[5]
        elseif wn == 1000000000000000 then
            wp.color = WeaponColor[6]
        end
        wu.dtap = wn
    end

    return wp
end

-- 計算玩家手持的武器傷害
function G_CheckWeapons(player)
    local pu = player.user

    if player:GetSecondaryWeapon() ~= nil then
        pu.swp = player:GetSecondaryWeapon()
        pwsu = pu.swp.user

        if pu.buyUB == 1 then
            pu.swp:AddClip1(10)
        end

        if pwsu.dtap == nil then
            if pu.swp.color == WeaponColor[1] then
                if pu.swp.weaponid == 16 then
                    pwsu.dtap = 2
                elseif pu.swp.weaponid == 1 then
                    pwsu.dtap = 16
                elseif pu.swp.weaponid == 67 then
                    pwsu.dtap = 128
                elseif pu.swp.weaponid == 26 then
                    pwsu.dtap = 1024
                elseif pu.swp.weaponid == 67 then
                    pwsu.dtap = 8192
                elseif pu.swp.weaponid == 17 then
                    pwsu.dtap = 4194304
                elseif pu.swp.weaponid == 70 then
                    pwsu.dtap = 137438953472
                elseif pu.swp.weaponid == map_weapon.map16[1].type then
                    pwsu.dtap = map_weapon.map16[1].value
                end
    
            elseif pu.swp.color == WeaponColor[2] then
                if pu.swp.weaponid == 16 then
                    pwsu.dtap = 4
                elseif pu.swp.weaponid == 1 then
                    pwsu.dtap = 32
                elseif pu.swp.weaponid == 67 then
                    pwsu.dtap = 256
                elseif pu.swp.weaponid == 10 then
                    pwsu.dtap = 2048
                elseif pu.swp.weaponid == 11 then
                    pwsu.dtap = 1048576
                elseif pu.swp.weaponid == 17 then
                    pwsu.dtap = 2199023255552
                end
    
            elseif pu.swp.color == WeaponColor[3] then
                if pu.swp.weaponid == 16 then
                    pwsu.dtap = 8
                elseif pu.swp.weaponid == 1 then
                    pwsu.dtap = 64
                elseif pu.swp.weaponid == 67 then
                    pwsu.dtap = 512
                elseif pu.swp.weaponid == 78 then
                    pwsu.dtap = 4096
                elseif pu.swp.weaponid == 26 then
                    pwsu.dtap = 262144
                elseif pu.swp.weaponid == 10 then
                    pwsu.dtap = 8589934592
                elseif pu.swp.weaponid == map_weapon.map15[3].type then
                    pwsu.dtap = map_weapon.map15[3].value
                end
    
            elseif pu.swp.color == WeaponColor[4] then
                if pu.swp.weaponid == 11 then
                    pwsu.dtap = 16
                elseif pu.swp.weaponid == 17 then
                    pwsu.dtap = 128
                elseif pu.swp.weaponid == 70 then
                    pwsu.dtap = 1024
                elseif pu.swp.weaponid == 67 then
                    pwsu.dtap = 65536
                elseif pu.swp.weaponid == 16 then
                    pwsu.dtap = 2147483648
                end
    
            elseif pu.swp.color == WeaponColor[5] then
                if pu.swp.weaponid == 26 then
                    pwsu.dtap = 32
                elseif pu.swp.weaponid == 10 then
                    pwsu.dtap = 256
                elseif pu.swp.weaponid == 78 then
                    pwsu.dtap = 2048
                elseif pu.swp.weaponid == 75 then
                    pwsu.dtap = 536870912
                end

            elseif pu.swp.color == WeaponColor[6] then
                if pu.swp.weaponid == 56 then
                    pwsu.dtap = 41
                elseif pu.swp.weaponid == 75 then
                    pwsu.dtap = 32768
                elseif pu.swp.weaponid == 373 then
                    pwsu.dtap = 549755813888
                end
    
            end
        end
        if pu.swp == 0 or pu.swp == nil then
            CSGW.value = player.index
            SGW.value = 0
        else
            CSGW.value = player.index
            SGW.value = pwsu.dtap
        end
    else
        CSGW.value = player.index
        SGW.value = 0
    end

    if player:GetPrimaryWeapon() ~= nil then
        pu.gwp = player:GetPrimaryWeapon()
        pwgu = pu.gwp.user

        if pu.buyUB == 1 then
            pu.gwp:AddClip1(10)
        end
  
        if pwgu.dtap == nil then
            if pu.gwp.color == WeaponColor[1] then
                if pu.gwp.weaponid == 12 then
                    pwgu.dtap = 65536
                elseif pu.gwp.weaponid == 7 then
                    pwgu.dtap = 524388
                elseif pu.gwp.weaponid == 3 then
                    pwgu.dtap = 33554432
                elseif pu.gwp.weaponid == 18 then
                    pwgu.dtap = 268435456
                elseif pu.gwp.weaponid == 103 then
                    pwgu.dtap = 2147483648
                elseif pu.gwp.weaponid == 66 then
                    pwgu.dtap = 17179869184
                elseif pu.gwp.weaponid == 95 then
                    pwgu.dtap = 1099511627776
                elseif pu.gwp.weaponid == map_weapon.map15[1].type then
                    pwgu.dtap = map_weapon.map15[1].value
                elseif pu.gwp.weaponid == 13 then
                    pwgu.dtap = 10000000000
                end

            elseif pu.gwp.color == WeaponColor[2] then
                if pu.gwp.weaponid == 7 then
                    pwgu.dtap = 16384
                elseif pu.gwp.weaponid == 19 then
                    pwgu.dtap = 131072
                elseif pu.gwp.weaponid == 66 then
                    pwgu.dtap = 8388688
                elseif pu.gwp.weaponid == 103 then
                    pwgu.dtap = 67108864
                elseif pu.gwp.weaponid == 192 then
                    pwgu.dtap = 536870912
                elseif pu.gwp.weaponid == 12 then
                    pwgu.dtap = 4294967296
                elseif pu.gwp.weaponid == 15 then
                    pwgu.dtap = 34359738368
                elseif pu.gwp.weaponid == 161 then
                    pwgu.dtap = 274877906944
                elseif pu.gwp.weaponid == map_weapon.map15[2].type then
                    pwgu.dtap = map_weapon.map15[2].value
                elseif pu.gwp.weaponid == map_weapon.map16[2].type then
                    pwgu.dtap = map_weapon.map16[2].value
                elseif pu.gwp.weaponid == 105 then
                    pwgu.dtap = 100000000000
                end

            elseif pu.gwp.color == WeaponColor[3] then
                if pu.gwp.weaponid == 23 then
                    pwgu.dtap = 32768
                elseif pu.gwp.weaponid == 90 then
                    pwgu.dtap = 2097152
                elseif pu.gwp.weaponid == 12 then
                    pwgu.dtap = 16777216
                elseif pu.gwp.weaponid == 95 then
                    pwgu.dtap = 134217728
                elseif pu.gwp.weaponid == 13 then
                    pwgu.dtap = 1073741824
                elseif pu.gwp.weaponid == 21 then
                    pwgu.dtap = 68719476736
                elseif pu.gwp.weaponid == 41 then
                    pwgu.dtap = 549755813888
                elseif pu.gwp.weaponid == 102 then
                    pwgu.dtap = 4398046511104
                elseif pu.gwp.weaponid == map_weapon.map16[3].type then
                    pwgu.dtap = map_weapon.map16[3].value
                elseif pu.gwp.weaponid == 39 then
                    pwgu.dtap = 1000000000000
                end

            elseif pu.gwp.color == WeaponColor[4] then
                if pu.gwp.weaponid == 12 then
                    pwgu.dtap = 8192
                elseif pu.gwp.weaponid == 3 then
                    pwgu.dtap = 524288
                elseif pu.gwp.weaponid == 30 then
                    pwgu.dtap = 4194304
                elseif pu.gwp.weaponid == 19 then
                    pwgu.dtap = 33554432
                elseif pu.gwp.weaponid == 58 then
                    pwgu.dtap = 268435456
                elseif pu.gwp.weaponid == 74 then
                    pwgu.dtap = 17179869184
                elseif pu.gwp.weaponid == 5 then
                    pwgu.dtap = 137438953472
                elseif pu.gwp.weaponid == 105 then
                    pwgu.dtap = 1099511627776
                elseif pu.gwp.weaponid == 108 then
                    pwgu.dtap = 8796093022208
                elseif pu.gwp.weaponid == map_weapon.map15[4].type then
                    pwgu.dtap = map_weapon.map15[4].value
                elseif pu.gwp.weaponid == map_weapon.map16[4].type then
                    pwgu.dtap = map_weapon.map16[4].value
                elseif pu.gwp.weaponid == 222 then
                    pwgu.dtap = 10000000000000
                end

            elseif pu.gwp.color == WeaponColor[5] then
                if pu.gwp.weaponid == 19 then
                    pwgu.dtap = 16384
                elseif pu.gwp.weaponid == 90 then
                    pwgu.dtap = 131072
                elseif pu.gwp.weaponid == 18 then
                    pwgu.dtap = 1048576
                elseif pu.gwp.weaponid == 15 then
                    pwgu.dtap = 8388608
                elseif pu.gwp.weaponid == 284 then
                    pwgu.dtap = 67108864
                elseif pu.gwp.weaponid == 204 then
                    pwgu.dtap = 4294967296
                elseif pu.gwp.weaponid == 105 then
                    pwgu.dtap = 34359738368
                elseif pu.gwp.weaponid == 39 then
                    pwgu.dtap = 274877906944
                elseif pu.gwp.weaponid == 24 then
                    pwgu.dtap = 2199023255552
                elseif pu.gwp.weaponid == 107 then
                    pwgu.dtap = 17592186044416
                elseif pu.gwp.weaponid == map_weapon.map15[5].type then
                    pwgu.dtap = map_weapon.map15[5].value
                elseif pu.gwp.weaponid == map_weapon.map16[5].type then
                    pwgu.dtap = map_weapon.map16[5].value
                elseif pu.gwp.weaponid == 20 then
                    pwgu.dtap = 100000000000000
                end

            elseif pu.gwp.color == WeaponColor[6] then
                if pu.gwp.weaponid == 203 then
                    pwgu.dtap = 262144
                elseif pu.gwp.weaponid == 258 then
                    pwgu.dtap = 2097152
                elseif pu.gwp.weaponid == 277 then
                    pwgu.dtap = 16777216
                elseif pu.gwp.weaponid == 381 then
                    pwgu.dtap = 134217728
                elseif pu.gwp.weaponid == 170 then
                    pwgu.dtap = 1073741824
                elseif pu.gwp.weaponid == 398 then
                    pwgu.dtap = 8589934592
                elseif pu.gwp.weaponid == 144 then
                    pwgu.dtap = 68719476736
                elseif pu.gwp.weaponid == 207 then
                    pwgu.dtap = 4398046511104
                elseif pu.gwp.weaponid == 400 then
                    pwgu.dtap = 35184372088832
                elseif pu.gwp.weaponid == map_weapon.map15[6].type then
                    pwgu.dtap = map_weapon.map15[6].value
                elseif pu.gwp.weaponid == map_weapon.map16[6].type then
                    pwgu.dtap = map_weapon.map16[6].value
                elseif pu.gwp.weaponid == 449 then
                    pwgu.dtap = 1000000000000000
                end

            end
        end

        if pu.gwp == 0 or pu.gwp == nil then
            CPGW.value = player.index
            PGW.value = 0
        else
            CPGW.value = player.index
            PGW.value = pwgu.dtap
        end
    else
        CPGW.value = player.index
        PGW.value = 0
    end
end

-- 獲得武器後
function G.R:OnGetWeapon(player,weaponid,weapon)
    local pu = player.user
    local PT1 = 0
    local PT2 = 0
    for i = 1, #WeaponList do
        if weapon:GetWeaponType() ~= Game.WEAPONTYPE.KNIFE then
            if weaponid ~= WeaponList[i] then
                PT1 = PT1 + 1
            end
    
            if weaponid ~= WeaponList[i] then
                PT2 = PT2 + 1
            end
        end
    end

    if PT1 == #WeaponList then
        pu.blacklist = 1
    end
    if PT2 == #WeaponList then
        pu.blacklist = 1
    end

    G_CheckWeapons(player)
end

-- 切換武器
function G.R:OnSwitchWeapon(player)
    local pu = player.user
    local PT1 = 0
    local PT2 = 0
    if player:GetSecondaryWeapon() ~= nil and player:GetPrimaryWeapon() ~= nil then
        for i = 1, #WeaponList do
            if player:GetSecondaryWeapon().weaponid ~= WeaponList[i] then
                PT1 = PT1 + 1
            end
    
            if player:GetPrimaryWeapon().weaponid ~= WeaponList[i] then
                PT2 = PT2 + 1
            end
        end
    
        if PT1 == #WeaponList then
            pu.blacklist = 1
        end
        if PT2 == #WeaponList then
            pu.blacklist = 1
        end
    end

    G_CheckWeapons(player)
end

local function drawWeapon(mw,player,pwp,map,pos)
    -- 根據幸運加成調整中獎機率
    for i, prize in ipairs(mw) do
        if i > 2 then
            prize.chance = prize.chance * (player.user.lucky)
        end
    end

    -- 抽獎
    local totalOdds = 0
    for i, prize in ipairs(mw) do
        totalOdds = totalOdds + prize.chance
    end

    local randomNum = G_RF(1, totalOdds)
    local cumulativeOdds = 0
    for i, prize in ipairs(mw) do
        cumulativeOdds = cumulativeOdds + prize.chance
        if randomNum <= cumulativeOdds then
            local weapon_value = 0
            local weapon_type = 0

            if prize.name == 'common' then
                weapon_value = mw[1].value
                weapon_type = mw[1].type

            elseif prize.name == 'rare' then
                weapon_value = mw[2].value
                weapon_type = mw[2].type

            elseif prize.name == 'epic' then
                weapon_value = mw[3].value
                weapon_type = mw[3].type

            elseif prize.name == 'legend' then
                weapon_value = mw[4].value
                weapon_type = mw[4].type
                AdviceLege.value = player.name
                if map == 1 then
                    G_ST('map1_legend',true)
                elseif map == 2 then
                    G_ST('map2_legend',true)
                elseif map == 3 then
                    G_ST('map3_legend',true)
                elseif map == 4 then
                    G_ST('map4_legend',true)
                elseif map == 5 then
                    G_ST('map5_legend',true)
                elseif map == 6 then
                    G_ST('map6_legend',true)
                elseif map == 7 then
                    G_ST('map7_legend',true)
                elseif map == 8 then
                    G_ST('map8_legend',true)
                elseif map == 9 then
                    G_ST('map9_legend',true)
                elseif map == 10 then
                    G_ST('map10_legend',true)
                elseif map == 11 then
                    G_ST('map11_legend',true)
                elseif map == 12 then
                    G_ST('map12_legend',true)
                elseif map == 13 then
                    G_ST('map13_legend',true)
                elseif map == 14 then
                    G_ST('map14_legend',true)
                elseif map == 15 then
                    G_ST('map15_legend',true)
                elseif map == 16 then
                    G_ST('map16_legend',true)
                elseif map == 1001 then
                    G_ST('map1001_legend',true)
                end

            elseif prize.name == 'mythic' then
                weapon_value = mw[5].value
                weapon_type = mw[5].type
                AdviceMyth.value = player.name
                if map == 1 then
                    G_ST('map1_mythic',true)
                elseif map == 2 then
                    G_ST('map2_mythic',true)
                elseif map == 3 then
                    G_ST('map3_mythic',true)
                elseif map == 4 then
                    G_ST('map4_mythic',true)
                elseif map == 5 then
                    G_ST('map5_mythic',true)
                elseif map == 6 then
                    G_ST('map6_mythic',true)
                elseif map == 7 then
                    G_ST('map7_mythic',true)
                elseif map == 8 then
                    G_ST('map8_mythic',true)
                elseif map == 9 then
                    G_ST('map9_mythic',true)
                elseif map == 10 then
                    G_ST('map10_mythic',true)
                elseif map == 11 then
                    G_ST('map11_mythic',true)
                elseif map == 12 then
                    G_ST('map12_mythic',true)
                elseif map == 13 then
                    G_ST('map13_mythic',true)
                elseif map == 14 then
                    G_ST('map14_mythic',true)
                elseif map == 15 then
                    G_ST('map15_mythic',true)
                elseif map == 16 then
                    G_ST('map16_mythic',true)
                elseif map == 1001 then
                    G_ST('map1001_mythic',true)
                end

            elseif prize.name == 'secret' then
                weapon_value = mw[6].value
                weapon_type = mw[6].type
                AdviceSecr.value = player.name
                if map == 4 then
                    G_ST('map4_secret',true)
                elseif map == 5 then
                    G_ST('map5_secret',true)
                elseif map == 6 then
                    G_ST('map6_secret',true)
                elseif map == 7 then
                    G_ST('map7_secret',true)
                elseif map == 8 then
                    G_ST('map8_secret',true)
                elseif map == 9 then
                    G_ST('map9_secret',true)
                elseif map == 10 then
                    G_ST('map10_secret',true)
                elseif map == 11 then
                    G_ST('map11_secret',true)
                elseif map == 12 then
                    G_ST('map12_secret',true)
                elseif map == 13 then
                    G_ST('map13_secret',true)
                elseif map == 14 then
                    G_ST('map14_secret',true)
                elseif map == 15 then
                    G_ST('map15_secret',true)
                elseif map == 16 then
                    G_ST('map16_secret',true)
                elseif map == 1001 then
                    G_ST('map1001_secret',true)
                end

            end

            local weapon_create = G_AutoSellWeapon(mw,player,pwp,map,weapon_type,pos,weapon_value)
            return weapon_create
        end
    end
end

-- 轉蛋系統
function G_WP(player,t,pos)
    local weapon_create
    local pu = player.user

    if t == 1 then
        if pu.triplehatch == 1 then
            if pu.tap >= 300 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 100
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 177,y = -169,z = 3}
                    elseif i == 2 then
                        pos = {x = 177,y = -170,z = 3}
                    elseif i == 3 then
                        pos = {x = 177,y = -171,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map1,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 100 then
                pu.tap = pu.tap - 100
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map1,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end
 
    elseif t == 2 then
        if pu.triplehatch == 1 then
            if pu.tap >= 3000 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 1000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 177,y = -139,z = 3}
                    elseif i == 2 then
                        pos = {x = 177,y = -140,z = 3}
                    elseif i == 3 then
                        pos = {x = 177,y = -141,z = 3}
                    end        
                    weapon_create = drawWeapon(map_weapon.map2,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 1000 then
                pu.tap = pu.tap - 1000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map2,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end
        
    elseif t == 3 then
        if pu.triplehatch == 1 then
            if pu.tap >= 30000 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 10000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 177,y = -101,z = 3}
                    elseif i == 2 then
                        pos = {x = 177,y = -102,z = 3}
                    elseif i == 3 then
                        pos = {x = 177,y = -103,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map3,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10000 then
                pu.tap = pu.tap - 10000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map3,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 4 then
        if pu.triplehatch == 1 then
            if pu.tap >= 300000 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 100000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 177,y = -59,z = 3}
                    elseif i == 2 then
                        pos = {x = 177,y = -60,z = 3}
                    elseif i == 3 then
                        pos = {x = 177,y = -61,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map4,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 100000 then
                pu.tap = pu.tap - 100000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map4,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 5 then
        if pu.triplehatch == 1 then
            if pu.tap >= 3000000 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 1000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 177,y = -20,z = 3}
                    elseif i == 2 then
                        pos = {x = 177,y = -21,z = 3}
                    elseif i == 3 then
                        pos = {x = 177,y = -22,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map5,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 1000000 then
                pu.tap = pu.tap - 1000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map5,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 6 then
        if pu.triplehatch == 1 then
            if pu.tap >= 30000000 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 10000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 177,y = 19,z = 3}
                    elseif i == 2 then
                        pos = {x = 177,y = 20,z = 3}
                    elseif i == 3 then
                        pos = {x = 177,y = 21,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map6,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 1000000 then
                pu.tap = pu.tap - 1000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map6,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 7 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^9) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 1000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 177,y = 81,z = 3}
                    elseif i == 2 then
                        pos = {x = 177,y = 82,z = 3}
                    elseif i == 3 then
                        pos = {x = 177,y = 83,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map7,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^9 then
                pu.tap = pu.tap - 1000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map7,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 8 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^10) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 10000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 177,y = 120,z = 3}
                    elseif i == 2 then
                        pos = {x = 177,y = 121,z = 3}
                    elseif i == 3 then
                        pos = {x = 177,y = 122,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map8,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^10 then
                pu.tap = pu.tap - 10000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map8,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 9 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^11) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 100000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 177,y = 160,z = 3}
                    elseif i == 2 then
                        pos = {x = 177,y = 161,z = 3}
                    elseif i == 3 then
                        pos = {x = 177,y = 162,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map9,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^11 then
                pu.tap = pu.tap - 100000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map9,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 10 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^12) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 1000000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 145,y = -160,z = 3}
                    elseif i == 2 then
                        pos = {x = 145,y = -161,z = 3}
                    elseif i == 3 then
                        pos = {x = 145,y = -162,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map10,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^12 then
                pu.tap = pu.tap - 1000000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map10,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 11 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^13) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 10000000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 145,y = -121,z = 3}
                    elseif i == 2 then
                        pos = {x = 145,y = -122,z = 3}
                    elseif i == 3 then
                        pos = {x = 145,y = -123,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map11,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^13 then
                pu.tap = pu.tap - 10000000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map11,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 12 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^16) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 10000000000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 145,y = -59,z = 3}
                    elseif i == 2 then
                        pos = {x = 145,y = -60,z = 3}
                    elseif i == 3 then
                        pos = {x = 145,y = -61,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map12,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^16 then
                pu.tap = pu.tap - 10000000000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map12,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 13 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^17) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 100000000000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 145,y = -19,z = 3}
                    elseif i == 2 then
                        pos = {x = 145,y = -20,z = 3}
                    elseif i == 3 then
                        pos = {x = 145,y = -21,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map13,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^17 then
                pu.tap = pu.tap - 100000000000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map13,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 14 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^18) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 1000000000000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 145,y = 19,z = 3}
                    elseif i == 2 then
                        pos = {x = 145,y = 20,z = 3}
                    elseif i == 3 then
                        pos = {x = 145,y = 21,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map14,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^18 then
                pu.tap = pu.tap - 1000000000000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map14,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 15 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^19) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 10000000000000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 145,y = 59,z = 3}
                    elseif i == 2 then
                        pos = {x = 145,y = 60,z = 3}
                    elseif i == 3 then
                        pos = {x = 145,y = 61,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map15,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^19 then
                pu.tap = pu.tap - 10000000000000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map15,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 16 then
        if pu.triplehatch == 1 then
            if pu.tap >= (10^20) * 3 then
                for i = 1, 3 do
                    pu.tap = pu.tap - 100000000000000000000
                    CTAP.value = player.index
                    TAP.value = pu.tap
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 145,y = 99,z = 3}
                    elseif i == 2 then
                        pos = {x = 145,y = 100,z = 3}
                    elseif i == 3 then
                        pos = {x = 145,y = 101,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map16,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        else
            if pu.tap >= 10^20 then
                pu.tap = pu.tap - 100000000000000000000
                CTAP.value = player.index
                TAP.value = pu.tap
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map16,player,1,t,pos)
                return weapon_create
            else
                AdviceNTAP.value = player.index
            end
        end

    elseif t == 1001 then
        if pu.triplehatch == 1 then
            if pu.lc >= 1 * 3 then
                for i = 1, 3 do
                    pu.lc = pu.lc - 1
                    CLC.value = player.index
                    LC.value = pu.lc
                    pu.hatch = pu.hatch + 1
                    CHATCH.value = player.index
                    HATCH.value = pu.hatch
                    if i == 1 then
                        pos = {x = 145,y = -89,z = 3}
                    elseif i == 2 then
                        pos = {x = 145,y = -90,z = 3}
                    elseif i == 3 then
                        pos = {x = 145,y = -91,z = 3}
                    end
                    weapon_create = drawWeapon(map_weapon.map1001,player,1,t,pos)
                end
                return weapon_create
            else
                AdviceNLC.value = player.index
            end
        else
            if pu.lc >= 1 then
                pu.lc = pu.lc - 1
                CLC.value = player.index
                LC.value = pu.lc
                pu.hatch = pu.hatch + 1
                CHATCH.value = player.index
                HATCH.value = pu.hatch
                weapon_create = drawWeapon(map_weapon.map1001,player,1,t,pos)
                return weapon_create
            else
                AdviceNLC.value = player.index
            end
        end

    end
end

-- 地圖轉蛋
function E.EGG.Map1:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 1
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,1,{x = 177,y = -170,z = 3})
    end
end
function Map1_Mythic()
    G_ST('map1_mythic',false)
end
function Map1_legend()
    G_ST('map1_legend',false)
end

function E.EGG.Map2:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 2
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,2,{x = 177,y = -140,z = 3})
    end
end
function Map2_Mythic()
    G_ST('map2_mythic',false)
end
function Map2_legend()
    G_ST('map2_legend',false)
end

function E.EGG.Map3:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 3
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,3,{x = 177,y = -102,z = 3})
    end
end
function Map3_Mythic()
    G_ST('map3_mythic',false)
end
function Map3_legend()
    G_ST('map3_legend',false)
end

function E.EGG.Map4:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 4
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,4,{x = 177,y = -60,z = 3})
    end
end
function Map4_Secret()
    G_ST('map4_secret',false)
end
function Map4_Mythic()
    G_ST('map4_mythic',false)
end
function Map4_legend()
    G_ST('map4_legend',false)
end

function E.EGG.Map5:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 5
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,5,{x = 177,y = -21,z = 3})
    end
end
function Map5_Secret()
    G_ST('map5_secret',false)
end
function Map5_Mythic()
    G_ST('map5_mythic',false)
end
function Map5_legend()
    G_ST('map5_legend',false)
end

function E.EGG.Map6:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 6
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,6,{x = 177,y = 20,z = 3})
    end
end
function Map6_Secret()
    G_ST('map6_secret',false)
end
function Map6_Mythic()
    G_ST('map6_mythic',false)
end
function Map6_legend()
    G_ST('map6_legend',false)
end

function E.EGG.Map7:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 7
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,7,{x = 177,y = 82,z = 3})
    end
end
function Map7_Secret()
    G_ST('map7_secret',false)
end
function Map7_Mythic()
    G_ST('map7_mythic',false)
end
function Map7_legend()
    G_ST('map7_legend',false)
end

function E.EGG.Map8:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 8
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,8,{x = 177,y = 121,z = 3})
    end
end
function Map8_Secret()
    G_ST('map8_secret',false)
end
function Map8_Mythic()
    G_ST('map8_mythic',false)
end
function Map8_legend()
    G_ST('map8_legend',false)
end

function E.EGG.Map9:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 9
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,9,{x = 177,y = 161,z = 3})
    end
end
function Map9_Secret()
    G_ST('map9_secret',false)
end
function Map9_Mythic()
    G_ST('map9_mythic',false)
end
function Map9_legend()
    G_ST('map9_legend',false)
end

function E.EGG.Map10:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 10
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,10,{x = 145,y = -161,z = 3})
    end
end
function Map10_Secret()
    G_ST('map10_secret',false)
end
function Map10_Mythic()
    G_ST('map10_mythic',false)
end
function Map10_legend()
    G_ST('map10_legend',false)
end

function E.EGG.Map11:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 11
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,11,{x = 145,y = -122,z = 3})
    end
end
function Map11_Secret()
    G_ST('map11_secret',false)
end
function Map11_Mythic()
    G_ST('map11_mythic',false)
end
function Map11_legend()
    G_ST('map11_legend',false)
end

function E.EGG.Map12:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 12
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,12,{x = 145,y = -60,z = 3})
    end
end
function Map12_Secret()
    G_ST('map12_secret',false)
end
function Map12_Mythic()
    G_ST('map12_mythic',false)
end
function Map12_legend()
    G_ST('map12_legend',false)
end

function E.EGG.Map13:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 13
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,13,{x = 145,y = -20,z = 3})
    end
end
function Map13_Secret()
    G_ST('map13_secret',false)
end
function Map13_Mythic()
    G_ST('map13_mythic',false)
end
function Map13_legend()
    G_ST('map13_legend',false)
end

function E.EGG.Map14:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 14
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,14,{x = 145,y = 20,z = 3})
    end
end
function Map14_Secret()
    G_ST('map14_secret',false)
end
function Map14_Mythic()
    G_ST('map14_mythic',false)
end
function Map14_legend()
    G_ST('map14_legend',false)
end

function E.EGG.Map15:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 15
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,15,{x = 145,y = 60,z = 3})
    end
end
function Map15_Secret()
    G_ST('map15_secret',false)
end
function Map15_Mythic()
    G_ST('map15_mythic',false)
end
function Map15_legend()
    G_ST('map15_legend',false)
end

function E.EGG.Map16:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 16
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,16,{x = 145,y = 100,z = 3})
    end
end
function Map16_Secret()
    G_ST('map16_secret',false)
end
function Map16_Mythic()
    G_ST('map16_mythic',false)
end
function Map16_legend()
    G_ST('map16_legend',false)
end

function E.EGG.Map1001:OnUse(player)
    if player.user.autohatch == 1 then
        if player.user.AHmap == 0 then
            player.user.AHmap = 1001
            AdviceAHStart.value = player.index
        else
            player.user.AHmap = 0
            AdviceAHStop.value = player.index
        end
    else
        G_WP(player,1001,{x = 145,y = -90,z = 3})
    end
end
function Map1001_Secret()
    G_ST('map1001_secret',false)
end
function Map1001_Mythic()
    G_ST('map1001_mythic',false)
end
function Map1001_legend()
    G_ST('map1001_legend',false)
end